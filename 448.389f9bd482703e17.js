"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[448],{448:(E,m,i)=>{i.r(m),i.d(m,{UserModule:()=>J});var c=i(6814),u=i(649),d=i(4202),e=i(5879),g=i(1384),f=i(3911);function P(t,o){if(1&t&&e._UZ(0,"img",10),2&t){const r=e.oxw();e.Q6J("src",r.image,e.LSH)}}const C=function(){return["/users","edit"]},x=function(t){return{username:t}};let Z=(()=>{class t{constructor(r){this.route=r,this.image=localStorage.getItem("image")}ngOnInit(){this.route.data.subscribe(({user:r})=>this.user=r)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(u.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-current-profile"]],decls:22,vars:23,consts:[[1,"container"],[1,"profile"],["alt","Profile Picture",3,"src",4,"ngIf"],[1,"buttons"],["routerLink","/sets/my-sets"],[1,"fa-solid","fa-box"],["routerLink","/sets/add-set"],[1,"fa-solid","fa-plus"],[3,"routerLink","queryParams"],[1,"fa-solid","fa-gear"],["alt","Profile Picture",3,"src"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,P,1,1,"img",2),e.TgZ(3,"h2"),e._uU(4),e.qZA()(),e.TgZ(5,"h3"),e._uU(6),e.ALo(7,"translate"),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",3)(10,"app-button",4),e._UZ(11,"i",5),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"app-button",6),e._UZ(15,"i",7),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"app-button",8),e._UZ(19,"i",9),e._uU(20),e.ALo(21,"translate"),e.qZA()()()),2&r&&(e.xp6(2),e.Q6J("ngIf",n.image),e.xp6(2),e.Oqu(null==n.user?null:n.user.username),e.xp6(2),e.lnq(" ",e.lcZ(7,10,"user.user-current-profile.header1"),": ",null==n.user||null==n.user.sets?null:n.user.sets.length," ",e.lcZ(8,12,"user.user-current-profile.header2")," "),e.xp6(6),e.hij(" ",e.lcZ(13,14,"user.user-current-profile.collection")," "),e.xp6(4),e.hij(" ",e.lcZ(17,16,"user.user-current-profile.new")," "),e.xp6(2),e.Q6J("routerLink",e.DdM(20,C))("queryParams",e.VKq(21,x,null==n.user?null:n.user.username)),e.xp6(2),e.hij(" ",e.lcZ(21,18,"user.user-current-profile.edit")," "))},dependencies:[c.O5,u.rH,g.r,f.X$],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f2f2f2;margin:0;padding:0}.container[_ngcontent-%COMP%]{max-width:420px;margin:50px auto;background-color:var(--primary-color);padding:20px;border-radius:5px;color:#fff}.profile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:20px}.profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-right:10px}.profile[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:6px}@media screen and (max-device-width: 480px) and (orientation: portrait){.container[_ngcontent-%COMP%]{max-width:300px}.buttons[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}"]}),t})();var h=i(3076),s=i(6223),v=i(9246),M=i(8394),U=i(2864);function b(t,o){if(1&t&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.Oqu(r)}}function A(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"app-popup",13),e.NdJ("closed",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.popup.hide())}),e.ALo(1,"translate"),e.YNc(2,b,2,1,"p",14),e.qZA()}if(2&t){const r=e.oxw();e.s9C("title",e.lcZ(1,2,"general.error")),e.xp6(2),e.Q6J("ngForOf",r.errors)}}function O(t,o){if(1&t&&e._UZ(0,"img",15),2&t){const r=e.oxw();e.Q6J("src",r.currentProfilePicture,e.LSH)}}function y(t,o){1&t&&(e.TgZ(0,"div",16)(1,"label",17),e._UZ(2,"i",18),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",19),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"user.edit-info.delete"),":"))}const F=[{path:"my-profile",component:Z,canActivate:[d._],resolve:{user:t=>(0,e.f3M)(h.K).user},title:"My Profile"},{path:"edit",component:(()=>{class t{constructor(r,n,a,l,p){this.fb=r,this.popup=n,this.activated=a,this.route=l,this.user=p,this.editForm=this.fb.group({username:["",[s.kI.required,s.kI.minLength(4)]],profilePicture:null,deleteProfilePicture:!1}),this.currentProfilePicture=null,this.errors=[]}ngOnInit(){this.editForm.patchValue({profilePicture:localStorage.getItem("image")}),this.currentProfilePicture=this.editForm.get("profilePicture")?.value,this.activated.queryParams.subscribe(r=>{this.editForm.patchValue({username:r.username})})}onFileChange(r){const n=r.target;if(n.files&&n.files.length>0){const a=n.files[0];this.editForm.patchValue({profilePicture:a});const l=new FileReader;l.readAsDataURL(a),l.onload=()=>{this.currentProfilePicture=l.result,this.editForm.patchValue({profilePicture:l.result})}}}onSubmit(r){if(r.disabled=!0,this.editForm.invalid)return this.errors=[],(0,v.j)(this.editForm).forEach(a=>{this.errors.push(`${a.control} ${a.message}`)}),this.popup.show(),void(r.disabled=!1);this.user.editUser(this.editForm.value).subscribe({complete:()=>{r.disabled=!1,this.editForm.get("deleteProfilePicture")?.value?localStorage.removeItem("image"):localStorage.setItem("image",this.currentProfilePicture),this.route.navigate(["users/my-profile"])},error:n=>{this.errors=[],this.errors.push(n.error.message),this.popup.show(),r.disabled=!1}})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(s.qu),e.Y36(M.q),e.Y36(u.gz),e.Y36(u.F0),e.Y36(h.K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-info"]],decls:25,vars:19,consts:[[3,"title","closed",4,"ngIf"],[1,"edit-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],[1,"fa-solid","fa-user","fa-xs"],["type","text","id","username","name","username","formControlName","username",3,"placeholder"],["for","image"],[1,"fa-solid","fa-image","fa-xs"],["type","file","id","image","name","image","accept","image/*",3,"change"],["alt","Selected Image",3,"src",4,"ngIf"],["class","form-group-side",4,"ngIf"],["button",""],[1,"fa-solid","fa-computer-mouse"],[3,"title","closed"],[4,"ngFor","ngForOf"],["alt","Selected Image",3,"src"],[1,"form-group-side"],["for","deleteProfilePicture"],[1,"fa-solid","fa-trash"],["type","checkbox","id","deleteProfilePicture","formControlName","deleteProfilePicture"]],template:function(r,n){if(1&r){const a=e.EpF();e.YNc(0,A,3,4,"app-popup",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(a);const p=e.MAs(21);return e.KtG(n.onSubmit(p))}),e.TgZ(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"label",3),e._UZ(7,"i",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",2)(13,"label",6),e._UZ(14,"i",7),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"input",8),e.NdJ("change",function(p){return n.onFileChange(p)}),e.qZA()(),e.YNc(18,O,1,1,"img",9),e.YNc(19,y,6,3,"div",10),e.TgZ(20,"app-button",null,11),e._UZ(22,"i",12),e._uU(23),e.ALo(24,"translate"),e.qZA()()}2&r&&(e.Q6J("ngIf",n.popup.isActive),e.xp6(1),e.Q6J("formGroup",n.editForm),e.xp6(2),e.Oqu(e.lcZ(4,9,"user.edit-info.header")),e.xp6(5),e.hij(" ",e.lcZ(9,11,"user.edit-info.username"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(11,13,"user.edit-info.username-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(16,15,"user.edit-info.image"),""),e.xp6(3),e.Q6J("ngIf",n.currentProfilePicture),e.xp6(1),e.Q6J("ngIf",n.currentProfilePicture),e.xp6(4),e.hij(" ",e.lcZ(24,17,"user.edit-info.save")," "))},dependencies:[c.sg,c.O5,U.R,g.r,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u,f.X$],styles:["[_nghost-%COMP%]{margin:2rem}.edit-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;background-color:#373737;border-radius:4px;color:#fff}.edit-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%], .form-group-side[_ngcontent-%COMP%]{margin-bottom:15px}.form-group-side[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:12px}input[_ngcontent-%COMP%]{width:95%;padding:10px;border:1px solid #ccc;border-radius:4px}.form-group-side[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:unset}.form-group-side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:unset}img[_ngcontent-%COMP%]{margin:15px 0;width:50%;height:auto;object-fit:cover}"]}),t})(),canActivate:[d._],title:"Edit Profile"}];let T=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(F),u.Bz]}),t})();var L=i(6208);let J=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,T,L.m,s.UX,f.aw,f.aw]}),t})()}}]);