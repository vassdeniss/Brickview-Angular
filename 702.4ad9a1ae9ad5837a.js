"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[702],{6702:(q,h,p)=>{p.r(h),p.d(h,{AuthModule:()=>O});var u=p(6814),s=p(6223),m=p(649),f=p(9246),e=p(5879),Z=p(8394),g=p(3076),c=p(2207),_=p(2864),x=p(1384),d=p(3911);function C(t,i){if(1&t&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Oqu(o)}}function A(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"app-popup",20),e.NdJ("closed",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.popup.hide())}),e.ALo(1,"translate"),e.YNc(2,C,2,1,"p",21),e.qZA()}if(2&t){const o=e.oxw();e.s9C("title",e.lcZ(1,2,"general.error")),e.xp6(2),e.Q6J("ngForOf",o.errors)}}function v(t,i){if(1&t&&e._UZ(0,"img",23),2&t){const o=e.oxw();e.Q6J("src",o.registerForm.value.image,e.LSH)}}let b=(()=>{class t{constructor(o,r,n,a,l){this.route=o,this.fb=r,this.popup=n,this.user=a,this.token=l,this.registerForm=this.fb.group({username:["",[s.kI.required,s.kI.minLength(4)]],email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required,s.kI.minLength(8)]],repeatPassword:["",[s.kI.required]],image:[""]},{validator:this.confirmedValidator("password","repeatPassword")}),this.errors=[]}onSubmit(o){if(o.disabled=!0,this.registerForm.invalid)return this.errors=[],(0,f.j)(this.registerForm).forEach(n=>{this.errors.push(`${n.control} ${n.message}`)}),this.popup.show(),void(o.disabled=!1);this.user.register(this.registerForm.value).subscribe({next:r=>{localStorage.setItem("image",this.registerForm.value.image),this.token.saveToken(r.tokens.accessToken),this.token.saveRefreshToken(r.tokens.refreshToken),o.disabled=!1,this.route.navigate([""])},error:r=>{this.errors=[],this.errors.push(r.error.message),this.popup.show(),o.disabled=!1}})}onFileChange(o){const r=o.target;if(null===r.files)return;const n=r.files[0],a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.registerForm.patchValue({image:a.result})}}confirmedValidator(o,r){return n=>{const a=n.controls[o];a.errors&&!a.errors.notSame||a.setErrors(a.value!==n.controls[r].value?{notSame:!0}:null)}}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(m.F0),e.Y36(s.qu),e.Y36(Z.q),e.Y36(g.K),e.Y36(c.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:45,vars:36,consts:[[3,"title","closed",4,"ngIf"],[1,"register-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],[1,"fa-solid","fa-user","fa-xs"],["type","text","id","username","name","username","formControlName","username",3,"placeholder"],["for","email"],[1,"fa-solid","fa-envelope","fa-xs"],["type","email","id","email","name","email","formControlName","email",3,"placeholder"],["for","password"],[1,"fa-solid","fa-lock","fa-xs"],["type","password","id","password","name","password","formControlName","password",3,"placeholder"],["for","repeat-password"],["type","password","id","repeat-password","name","repeat-password","formControlName","repeatPassword",3,"placeholder"],["for","image"],[1,"fa-solid","fa-image","fa-xs"],["type","file","id","image","name","image","accept","image/*",3,"change"],["alt","Selected Image",3,"src",4,"ngIf"],["button",""],[1,"fa-solid","fa-computer-mouse"],[3,"title","closed"],["class","multiline",4,"ngFor","ngForOf"],[1,"multiline"],["alt","Selected Image",3,"src"]],template:function(o,r){if(1&o){const n=e.EpF();e.YNc(0,A,3,4,"app-popup",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(n);const l=e.MAs(41);return e.KtG(r.onSubmit(l))}),e.TgZ(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"label",3),e._UZ(7,"i",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",2)(13,"label",6),e._UZ(14,"i",7),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",8),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",2)(20,"label",9),e._UZ(21,"i",10),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",11),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",2)(27,"label",12),e._UZ(28,"i",10),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"input",13),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",2)(34,"label",14),e._UZ(35,"i",15),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"input",16),e.NdJ("change",function(l){return r.onFileChange(l)}),e.qZA()(),e.YNc(39,v,1,1,"img",17),e.TgZ(40,"app-button",null,18),e._UZ(42,"i",19),e._uU(43),e.ALo(44,"translate"),e.qZA()()}2&o&&(e.Q6J("ngIf",r.popup.isActive),e.xp6(1),e.Q6J("formGroup",r.registerForm),e.xp6(2),e.Oqu(e.lcZ(4,14,"user.register.register")),e.xp6(5),e.hij(" ",e.lcZ(9,16,"user.register.username"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(11,18,"user.register.username-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(16,20,"user.register.email"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(18,22,"user.register.email-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(23,24,"user.register.password"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(25,26,"user.register.password-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(30,28,"user.register.password-repeat")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(32,30,"user.register.password-repeat-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(37,32,"user.register.image")," "),e.xp6(3),e.Q6J("ngIf",r.registerForm.value.image),e.xp6(4),e.hij(" ",e.lcZ(44,34,"user.register.button")," "))},dependencies:[u.sg,u.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,_.R,x.r,d.X$],styles:["[_nghost-%COMP%]{margin:2rem}.multiline[_ngcontent-%COMP%]{white-space:pre-wrap}.register-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;background-color:#373737;border-radius:4px;color:#fff}.register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:12px}input[_ngcontent-%COMP%]{width:95%;padding:10px;border:1px solid #ccc;border-radius:4px}img[_ngcontent-%COMP%]{margin-top:15px;width:50%;height:auto;object-fit:cover}"]}),t})(),T=(()=>{class t{constructor(o,r,n){this.user=o,this.router=r,this.token=n}ngOnInit(){this.user.logout().subscribe(()=>{this.token.clearTokens(),this.router.navigate([""])})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(g.K),e.Y36(m.F0),e.Y36(c.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:2,vars:0,template:function(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1,"logout works!"),e.qZA())}}),t})();var w=p(4202);function L(t,i){if(1&t&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Oqu(o)}}function F(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"app-popup",11),e.NdJ("closed",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.popup.hide())}),e.ALo(1,"translate"),e.YNc(2,L,2,1,"p",12),e.qZA()}if(2&t){const o=e.oxw();e.s9C("title",e.lcZ(1,2,"general.error")),e.xp6(2),e.Q6J("ngForOf",o.errors)}}const U=[{path:"register",component:b,title:"Register"},{path:"login",component:(()=>{class t{constructor(o,r,n,a,l){this.route=o,this.fb=r,this.popup=n,this.user=a,this.token=l,this.loginForm=this.fb.group({username:["",[s.kI.required]],password:["",[s.kI.required]]}),this.errors=[]}onSubmit(o){if(o.disabled=!0,this.loginForm.invalid)return this.errors=[],(0,f.j)(this.loginForm).forEach(n=>{this.errors.push(`${n.control} ${n.message}`)}),this.popup.show(),void(o.disabled=!1);this.user.login(this.loginForm.value).subscribe({next:r=>{localStorage.setItem("image",r.image),this.token.saveToken(r.tokens.accessToken),this.token.saveRefreshToken(r.tokens.refreshToken),o.disabled=!1,this.route.navigate([""])},error:r=>{this.errors=[],this.errors.push(r.error.message),this.popup.show(),o.disabled=!1}})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(m.F0),e.Y36(s.qu),e.Y36(Z.q),e.Y36(g.K),e.Y36(c.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:24,vars:20,consts:[[3,"title","closed",4,"ngIf"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],[1,"fa-solid","fa-user","fa-xs"],["id","username","name","username","formControlName","username",3,"placeholder"],["for","password"],[1,"fa-solid","fa-lock","fa-xs"],["type","password","id","password","name","password","formControlName","password",3,"placeholder"],["button",""],[1,"fa-solid","fa-computer-mouse"],[3,"title","closed"],[4,"ngFor","ngForOf"]],template:function(o,r){if(1&o){const n=e.EpF();e.YNc(0,F,3,4,"app-popup",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(n);const l=e.MAs(20);return e.KtG(r.onSubmit(l))}),e.TgZ(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"label",3),e._UZ(7,"i",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",2)(13,"label",6),e._UZ(14,"i",7),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",8),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"app-button",null,9),e._UZ(21,"i",10),e._uU(22),e.ALo(23,"translate"),e.qZA()()}2&o&&(e.Q6J("ngIf",r.popup.isActive),e.xp6(1),e.Q6J("formGroup",r.loginForm),e.xp6(2),e.Oqu(e.lcZ(4,8,"user.login.login")),e.xp6(5),e.hij(" ",e.lcZ(9,10,"user.login.username"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(11,12,"user.login.username-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(16,14,"user.login.password"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(18,16,"user.login.password-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(23,18,"user.login.button")," "))},dependencies:[u.sg,u.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,_.R,x.r,d.X$],styles:["[_nghost-%COMP%]{margin:2rem}.login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;background-color:#373737;color:#fff;border-radius:4px}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:12px}input[_ngcontent-%COMP%]{width:95%;padding:10px;border:1px solid #ccc;border-radius:4px}"]}),t})(),title:"Login"},{path:"logout",component:T,canActivate:[w._],title:"Logout"}];let M=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(U),m.Bz]}),t})();var k=p(6208);let O=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,M,s.UX,k.m,d.aw]}),t})()}}]);