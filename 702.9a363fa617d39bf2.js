"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[702],{6702:(O,f,p)=>{p.r(f),p.d(f,{AuthModule:()=>U});var u=p(6814),n=p(6223),c=p(649),h=p(9246),e=p(5879),Z=p(8394),g=p(3076),m=p(2207),_=p(2864),d=p(3911);function x(r,i){if(1&r&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&r){const o=i.$implicit;e.xp6(1),e.Oqu(o)}}function C(r,i){if(1&r){const o=e.EpF();e.TgZ(0,"app-popup",20),e.NdJ("closed",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.popup.hide())}),e.ALo(1,"translate"),e.YNc(2,x,2,1,"p",21),e.qZA()}if(2&r){const o=e.oxw();e.s9C("title",e.lcZ(1,2,"general.error")),e.xp6(2),e.Q6J("ngForOf",o.errors)}}function b(r,i){if(1&r&&e._UZ(0,"img",23),2&r){const o=e.oxw();e.Q6J("src",o.registerForm.value.image,e.LSH)}}let A=(()=>{class r{constructor(o,t,s,a,l){this.route=o,this.fb=t,this.popup=s,this.user=a,this.token=l,this.registerForm=this.fb.group({username:["",[n.kI.required,n.kI.minLength(4)]],email:["",[n.kI.required,n.kI.email]],password:["",[n.kI.required,n.kI.minLength(8)]],repeatPassword:["",[n.kI.required]],image:[""]},{validator:this.confirmedValidator("password","repeatPassword")}),this.errors=[]}onSubmit(o){if(o.disabled=!0,this.registerForm.invalid)return this.errors=[],(0,h.j)(this.registerForm).forEach(s=>{this.errors.push(`${s.control} ${s.message}`)}),this.popup.show(),void(o.disabled=!1);this.user.register(this.registerForm.value).subscribe({next:t=>{localStorage.setItem("image",this.registerForm.value.image),this.token.saveToken(t.tokens.accessToken),this.token.saveRefreshToken(t.tokens.refreshToken),o.disabled=!1,this.route.navigate([""])},error:t=>{this.errors=[],this.errors.push(t.error.message),this.popup.show(),o.disabled=!1}})}onFileChange(o){const t=o.target;if(null===t.files)return;const s=t.files[0],a=new FileReader;a.readAsDataURL(s),a.onload=()=>{this.registerForm.patchValue({image:a.result})}}confirmedValidator(o,t){return s=>{const a=s.controls[o];a.errors&&!a.errors.notSame||a.setErrors(a.value!==s.controls[t].value?{notSame:!0}:null)}}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(c.F0),e.Y36(n.qu),e.Y36(Z.q),e.Y36(g.K),e.Y36(m.B))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],decls:45,vars:36,consts:[[3,"title","closed",4,"ngIf"],[1,"register-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],[1,"fa-solid","fa-user","fa-xs"],["type","text","id","username","name","username","formControlName","username",3,"placeholder"],["for","email"],[1,"fa-solid","fa-envelope","fa-xs"],["type","email","id","email","name","email","formControlName","email",3,"placeholder"],["for","password"],[1,"fa-solid","fa-lock","fa-xs"],["type","password","id","password","name","password","formControlName","password",3,"placeholder"],["for","repeat-password"],["type","password","id","repeat-password","name","repeat-password","formControlName","repeatPassword",3,"placeholder"],["for","image"],[1,"fa-solid","fa-image","fa-xs"],["type","file","id","image","name","image","accept","image/*",3,"change"],["alt","Selected Image",3,"src",4,"ngIf"],["button",""],[1,"fa-solid","fa-computer-mouse"],[3,"title","closed"],["class","multiline",4,"ngFor","ngForOf"],[1,"multiline"],["alt","Selected Image",3,"src"]],template:function(o,t){if(1&o){const s=e.EpF();e.YNc(0,C,3,4,"app-popup",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(s);const l=e.MAs(41);return e.KtG(t.onSubmit(l))}),e.TgZ(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"label",3),e._UZ(7,"i",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",2)(13,"label",6),e._UZ(14,"i",7),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",8),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",2)(20,"label",9),e._UZ(21,"i",10),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",11),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",2)(27,"label",12),e._UZ(28,"i",10),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"input",13),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",2)(34,"label",14),e._UZ(35,"i",15),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"input",16),e.NdJ("change",function(l){return t.onFileChange(l)}),e.qZA()(),e.YNc(39,b,1,1,"img",17),e.TgZ(40,"button",null,18),e._UZ(42,"i",19),e._uU(43),e.ALo(44,"translate"),e.qZA()()}2&o&&(e.Q6J("ngIf",t.popup.isActive),e.xp6(1),e.Q6J("formGroup",t.registerForm),e.xp6(2),e.Oqu(e.lcZ(4,14,"user.register.register")),e.xp6(5),e.hij(" ",e.lcZ(9,16,"user.register.username"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(11,18,"user.register.username-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(16,20,"user.register.email"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(18,22,"user.register.email-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(23,24,"user.register.password"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(25,26,"user.register.password-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(30,28,"user.register.password-repeat")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(32,30,"user.register.password-repeat-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(37,32,"user.register.image")," "),e.xp6(3),e.Q6J("ngIf",t.registerForm.value.image),e.xp6(4),e.hij(" ",e.lcZ(44,34,"user.register.button")," "))},dependencies:[u.sg,u.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,_.R,d.X$],styles:["[_nghost-%COMP%]{margin:2rem}.multiline[_ngcontent-%COMP%]{white-space:pre-wrap}.register-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;background-color:#f7f7f7;border:1px solid #ccc;border-radius:4px}.register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:12px}input[_ngcontent-%COMP%]{width:95%;padding:10px;border:1px solid #ccc;border-radius:4px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin-top:20px;background-color:green;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#015605}img[_ngcontent-%COMP%]{margin-top:15px;width:50%;height:auto;object-fit:cover}"]}),r})(),v=(()=>{class r{constructor(o,t,s){this.user=o,this.router=t,this.token=s}ngOnInit(){this.user.logout().subscribe(()=>{this.token.clearTokens(),this.router.navigate([""])})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(g.K),e.Y36(c.F0),e.Y36(m.B))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"p"),e._uU(1,"logout works!"),e.qZA())}}),r})();var w=p(4202);function T(r,i){if(1&r&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&r){const o=i.$implicit;e.xp6(1),e.Oqu(o)}}function L(r,i){if(1&r){const o=e.EpF();e.TgZ(0,"app-popup",11),e.NdJ("closed",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.popup.hide())}),e.ALo(1,"translate"),e.YNc(2,T,2,1,"p",12),e.qZA()}if(2&r){const o=e.oxw();e.s9C("title",e.lcZ(1,2,"general.error")),e.xp6(2),e.Q6J("ngForOf",o.errors)}}const F=[{path:"register",component:A,title:"Register"},{path:"login",component:(()=>{class r{constructor(o,t,s,a,l){this.route=o,this.fb=t,this.popup=s,this.user=a,this.token=l,this.loginForm=this.fb.group({username:["",[n.kI.required]],password:["",[n.kI.required]]}),this.errors=[]}onSubmit(o){if(o.disabled=!0,this.loginForm.invalid)return this.errors=[],(0,h.j)(this.loginForm).forEach(s=>{this.errors.push(`${s.control} ${s.message}`)}),this.popup.show(),void(o.disabled=!1);this.user.login(this.loginForm.value).subscribe({next:t=>{localStorage.setItem("image",t.image),this.token.saveToken(t.tokens.accessToken),this.token.saveRefreshToken(t.tokens.refreshToken),o.disabled=!1,this.route.navigate([""])},error:t=>{this.errors=[],this.errors.push(t.error.message),this.popup.show(),o.disabled=!1}})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(c.F0),e.Y36(n.qu),e.Y36(Z.q),e.Y36(g.K),e.Y36(m.B))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:24,vars:20,consts:[[3,"title","closed",4,"ngIf"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],[1,"fa-solid","fa-user","fa-xs"],["id","username","name","username","formControlName","username",3,"placeholder"],["for","password"],[1,"fa-solid","fa-lock","fa-xs"],["type","password","id","password","name","password","formControlName","password",3,"placeholder"],["button",""],[1,"fa-solid","fa-computer-mouse"],[3,"title","closed"],[4,"ngFor","ngForOf"]],template:function(o,t){if(1&o){const s=e.EpF();e.YNc(0,L,3,4,"app-popup",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(s);const l=e.MAs(20);return e.KtG(t.onSubmit(l))}),e.TgZ(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"label",3),e._UZ(7,"i",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",2)(13,"label",6),e._UZ(14,"i",7),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",8),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"button",null,9),e._UZ(21,"i",10),e._uU(22),e.ALo(23,"translate"),e.qZA()()}2&o&&(e.Q6J("ngIf",t.popup.isActive),e.xp6(1),e.Q6J("formGroup",t.loginForm),e.xp6(2),e.Oqu(e.lcZ(4,8,"user.login.login")),e.xp6(5),e.hij(" ",e.lcZ(9,10,"user.login.username"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(11,12,"user.login.username-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(16,14,"user.login.password"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(18,16,"user.login.password-placeholder")),e.xp6(5),e.hij(" ",e.lcZ(23,18,"user.login.button")," "))},dependencies:[u.sg,u.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,_.R,d.X$],styles:["[_nghost-%COMP%]{margin:2rem}.login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;background-color:#f7f7f7;border:1px solid #ccc;border-radius:4px}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:12px}input[_ngcontent-%COMP%]{width:95%;padding:10px;border:1px solid #ccc;border-radius:4px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin-top:20px;background-color:green;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#015605}"]}),r})(),title:"Login"},{path:"logout",component:v,canActivate:[w._],title:"Logout"}];let k=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.Bz.forChild(F),c.Bz]}),r})();var M=p(6208);let U=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.ez,k,n.UX,M.m,d.aw]}),r})()}}]);