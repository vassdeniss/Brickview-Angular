"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[702],{6702:(P,d,a)=>{a.r(d),a.d(d,{AuthModule:()=>O});var u=a(6814),n=a(95),m=a(3065),f=a(9246),e=a(4946),h=a(8394),g=a(3076),c=a(2207),_=a(2864);function C(t,i){if(1&t&&(e.TgZ(0,"p",17),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Oqu(o)}}function b(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"app-popup",15),e.NdJ("closed",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.popup.hide())}),e.YNc(1,C,2,1,"p",16),e.qZA()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.errors)}}function Z(t,i){if(1&t&&e._UZ(0,"img",18),2&t){const o=e.oxw();e.Q6J("src",o.registerForm.value.image,e.LSH)}}let x=(()=>{class t{constructor(o,r,s,p,l){this.route=o,this.fb=r,this.popup=s,this.user=p,this.token=l,this.registerForm=this.fb.group({username:["",[n.kI.required,n.kI.minLength(4)]],email:["",[n.kI.required,n.kI.email]],password:["",[n.kI.required,n.kI.minLength(8)]],repeatPassword:["",[n.kI.required]],image:[""]},{validator:this.confirmedValidator("password","repeatPassword")}),this.errors=[]}onSubmit(o){if(o.disabled=!0,this.registerForm.invalid)return this.errors=[],(0,f.j)(this.registerForm).forEach(s=>{this.errors.push(`${s.control} ${s.message}`)}),this.popup.show(),void(o.disabled=!1);this.user.register(this.registerForm.value).subscribe({next:r=>{localStorage.setItem("image",this.registerForm.value.image),this.token.saveToken(r.tokens.accessToken),this.token.saveRefreshToken(r.tokens.refreshToken),o.disabled=!1,this.route.navigate([""])},error:r=>{this.errors=[],this.errors.push(r.error.message),this.popup.show(),o.disabled=!1}})}onFileChange(o){const r=o.target;if(null===r.files)return;const s=r.files[0],p=new FileReader;p.readAsDataURL(s),p.onload=()=>{this.registerForm.patchValue({image:p.result})}}confirmedValidator(o,r){return s=>{const p=s.controls[o];p.errors&&!p.errors.notSame||p.setErrors(p.value!==s.controls[r].value?{notSame:!0}:null)}}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(m.F0),e.Y36(n.qu),e.Y36(h.q),e.Y36(g.K),e.Y36(c.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:28,vars:3,consts:[["title","Error!",3,"closed",4,"ngIf"],[1,"register-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","Enter username","formControlName","username"],["for","email"],["type","email","id","email","name","email","placeholder","Enter email","formControlName","email"],["for","password"],["type","password","id","password","name","password","placeholder","Enter password","formControlName","password"],["for","repeat-password"],["type","password","id","repeat-password","name","repeat-password","placeholder","Repeat password","formControlName","repeatPassword"],["for","image"],["type","file","id","image","name","image","accept","image/*",3,"change"],["alt","Selected Image",3,"src",4,"ngIf"],["button",""],["title","Error!",3,"closed"],["class","multiline",4,"ngFor","ngForOf"],[1,"multiline"],["alt","Selected Image",3,"src"]],template:function(o,r){if(1&o){const s=e.EpF();e.YNc(0,b,2,1,"app-popup",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(s);const l=e.MAs(26);return e.KtG(r.onSubmit(l))}),e.TgZ(2,"h2"),e._uU(3,"Register"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Username"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"div",2)(9,"label",5),e._uU(10,"Email"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"div",2)(13,"label",7),e._uU(14,"Password"),e.qZA(),e._UZ(15,"input",8),e.qZA(),e.TgZ(16,"div",2)(17,"label",9),e._uU(18,"Repeat Password"),e.qZA(),e._UZ(19,"input",10),e.qZA(),e.TgZ(20,"div",2)(21,"label",11),e._uU(22,"Profile Image"),e.qZA(),e.TgZ(23,"input",12),e.NdJ("change",function(l){return r.onFileChange(l)}),e.qZA()(),e.YNc(24,Z,1,1,"img",13),e.TgZ(25,"button",null,14),e._uU(27,"Register"),e.qZA()()}2&o&&(e.Q6J("ngIf",r.popup.isActive),e.xp6(1),e.Q6J("formGroup",r.registerForm),e.xp6(23),e.Q6J("ngIf",r.registerForm.value.image))},dependencies:[u.sg,u.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,_.R],styles:["[_nghost-%COMP%]{margin:2rem}.multiline[_ngcontent-%COMP%]{white-space:pre-wrap}.register-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;background-color:#f7f7f7;border:1px solid #ccc;border-radius:4px}.register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:12px}input[_ngcontent-%COMP%]{width:95%;padding:10px;border:1px solid #ccc;border-radius:4px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin-top:20px;background-color:green;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#015605}img[_ngcontent-%COMP%]{margin-top:15px;width:50%;height:auto;object-fit:cover}"]}),t})(),v=(()=>{class t{constructor(o,r,s){this.user=o,this.router=r,this.token=s}ngOnInit(){this.user.logout().subscribe(()=>{this.token.clearTokens(),this.router.navigate([""])})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(g.K),e.Y36(m.F0),e.Y36(c.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:2,vars:0,template:function(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1,"logout works!"),e.qZA())}}),t})();var w=a(4202);function T(t,i){if(1&t&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Oqu(o)}}function A(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"app-popup",8),e.NdJ("closed",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.popup.hide())}),e.YNc(1,T,2,1,"p",9),e.qZA()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.errors)}}const F=[{path:"register",component:x,title:"Register"},{path:"login",component:(()=>{class t{constructor(o,r,s,p,l){this.route=o,this.fb=r,this.popup=s,this.user=p,this.token=l,this.loginForm=this.fb.group({username:["",[n.kI.required]],password:["",[n.kI.required]]}),this.errors=[]}onSubmit(o){if(o.disabled=!0,this.loginForm.invalid)return this.errors=[],(0,f.j)(this.loginForm).forEach(s=>{this.errors.push(`${s.control} ${s.message}`)}),this.popup.show(),void(o.disabled=!1);this.user.login(this.loginForm.value).subscribe({next:r=>{localStorage.setItem("image",r.image),this.token.saveToken(r.tokens.accessToken),this.token.saveRefreshToken(r.tokens.refreshToken),o.disabled=!1,this.route.navigate([""])},error:r=>{this.errors=[],this.errors.push(r.error.message),this.popup.show(),o.disabled=!1}})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(m.F0),e.Y36(n.qu),e.Y36(h.q),e.Y36(g.K),e.Y36(c.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:15,vars:2,consts:[["title","Error!",3,"closed",4,"ngIf"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],["id","username","name","username","placeholder","Enter username","formControlName","username"],["for","password"],["type","password","id","password","name","password","placeholder","Enter password","formControlName","password"],["button",""],["title","Error!",3,"closed"],[4,"ngFor","ngForOf"]],template:function(o,r){if(1&o){const s=e.EpF();e.YNc(0,A,2,1,"app-popup",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(s);const l=e.MAs(13);return e.KtG(r.onSubmit(l))}),e.TgZ(2,"h2"),e._uU(3,"Login"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Username"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"div",2)(9,"label",5),e._uU(10,"Password"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"button",null,7),e._uU(14,"Login"),e.qZA()()}2&o&&(e.Q6J("ngIf",r.popup.isActive),e.xp6(1),e.Q6J("formGroup",r.loginForm))},dependencies:[u.sg,u.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,_.R],styles:["[_nghost-%COMP%]{margin:2rem}.login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;background-color:#f7f7f7;border:1px solid #ccc;border-radius:4px}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:12px}input[_ngcontent-%COMP%]{width:95%;padding:10px;border:1px solid #ccc;border-radius:4px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin-top:20px;background-color:green;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#015605}"]}),t})(),title:"Login"},{path:"logout",component:v,canActivate:[w._],title:"Logout"}];let k=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(F),m.Bz]}),t})();var M=a(6208);let O=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,k,n.UX,M.m]}),t})()}}]);