"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[448],{448:(S,d,i)=>{i.r(d),i.d(d,{UserModule:()=>J});var a=i(6814),c=i(3065),g=i(4202),f=i(7398),e=i(4946);function h(n,r){if(1&n&&e._UZ(0,"img",8),2&n){const t=e.oxw().ngIf;e.Q6J("src",null==t?null:t.image,e.LSH)}}const P=function(){return["/users","edit"]},C=function(n){return{username:n}};function x(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",2),e.YNc(2,h,1,1,"img",3),e.TgZ(3,"h2"),e._uU(4),e.qZA()(),e.TgZ(5,"h3"),e._uU(6),e.qZA(),e.TgZ(7,"div",4)(8,"button",5),e._uU(9,"My Collection"),e.qZA(),e.TgZ(10,"button",6),e._uU(11,"Add a New Set"),e.qZA(),e.TgZ(12,"button",7),e._uU(13," Edit Profile "),e.qZA()(),e.BQk()),2&n){const t=r.ngIf;e.xp6(2),e.Q6J("ngIf",null==t?null:t.image),e.xp6(2),e.Oqu(null==t?null:t.username),e.xp6(2),e.hij("You have: ",null==t||null==t.sets?null:t.sets.length," sets"),e.xp6(6),e.Q6J("routerLink",e.DdM(5,P))("queryParams",e.VKq(6,C,null==t?null:t.username))}}let _=(()=>{class n{constructor(t){this.route=t}ngOnInit(){this.user$=this.route.data.pipe((0,f.U)(({user:t})=>t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-current-profile"]],decls:3,vars:3,consts:[[1,"container"],[4,"ngIf"],[1,"profile"],["alt","Profile Picture",3,"src",4,"ngIf"],[1,"buttons"],["routerLink","/sets/my-sets",1,"button"],["routerLink","/sets/add-set",1,"button"],[1,"button",3,"routerLink","queryParams"],["alt","Profile Picture",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,x,14,8,"ng-container",1),e.ALo(2,"async"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,o.user$)))},dependencies:[a.O5,c.rH,a.Ov],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f2f2f2;margin:0;padding:0}.container[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;background-color:green;padding:20px;border-radius:5px;color:#fff}.profile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:20px}.profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-right:10px}.profile[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.button[_ngcontent-%COMP%]{padding:8px 12px;background-color:#fff;color:#000;border:none;border-radius:3px;cursor:pointer}@media screen and (max-device-width: 480px) and (orientation: portrait){.container[_ngcontent-%COMP%]{max-width:300px}.buttons[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}"]}),n})();var m=i(3076),s=i(95),v=i(9246),M=i(8394),Z=i(2864);function O(n,r){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.Oqu(t)}}function I(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-popup",10),e.NdJ("closed",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.popup.hide())}),e.YNc(1,O,2,1,"p",11),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.errors)}}function U(n,r){if(1&n&&e._UZ(0,"img",12),2&n){const t=e.oxw();e.Q6J("src",t.currentProfilePicture,e.LSH)}}function y(n,r){1&n&&(e.TgZ(0,"div",13)(1,"label",14),e._uU(2,"Delete Picture?:"),e.qZA(),e._UZ(3,"input",15),e.qZA())}const A=[{path:"my-profile",component:_,canActivate:[g._],resolve:{user:n=>(0,e.f3M)(m.K).getLoggedUser()},title:"My Profile"},{path:"edit",component:(()=>{class n{constructor(t,o,u,l,p){this.fb=t,this.popup=o,this.activated=u,this.route=l,this.user=p,this.editForm=this.fb.group({username:["",[s.kI.required,s.kI.minLength(4)]],profilePicture:null,deleteProfilePicture:!1}),this.currentProfilePicture=null,this.errors=[]}ngOnInit(){this.editForm.patchValue({profilePicture:localStorage.getItem("image")}),this.currentProfilePicture=this.editForm.get("profilePicture")?.value,this.activated.queryParams.subscribe(t=>{this.editForm.patchValue({username:t.username})})}onFileChange(t){const o=t.target;if(o.files&&o.files.length>0){const u=o.files[0];this.editForm.patchValue({profilePicture:u});const l=new FileReader;l.readAsDataURL(u),l.onload=()=>{this.currentProfilePicture=l.result,this.editForm.patchValue({profilePicture:l.result})}}}onSubmit(t){if(t.disabled=!0,this.editForm.invalid)return this.errors=[],(0,v.j)(this.editForm).forEach(u=>{this.errors.push(`${u.control} ${u.message}`)}),this.popup.show(),void(t.disabled=!1);this.user.editUser(this.editForm.value).subscribe({complete:()=>{t.disabled=!1,this.editForm.get("deleteProfilePicture")?.value?localStorage.removeItem("image"):localStorage.setItem("image",this.currentProfilePicture),this.route.navigate(["users/my-profile"])},error:o=>{this.errors=[],this.errors.push(o.error.message),this.popup.show(),t.disabled=!1}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(M.q),e.Y36(c.gz),e.Y36(c.F0),e.Y36(m.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-info"]],decls:17,vars:4,consts:[["title","Error!",3,"closed",4,"ngIf"],[1,"edit-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","Enter new username","formControlName","username"],["for","image"],["type","file","id","image","name","image","accept","image/*",3,"change"],["alt","Selected Image",3,"src",4,"ngIf"],["class","form-group-side",4,"ngIf"],["button",""],["title","Error!",3,"closed"],[4,"ngFor","ngForOf"],["alt","Selected Image",3,"src"],[1,"form-group-side"],["for","deleteProfilePicture"],["type","checkbox","id","deleteProfilePicture","formControlName","deleteProfilePicture"]],template:function(t,o){if(1&t){const u=e.EpF();e.YNc(0,I,2,1,"app-popup",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(u);const p=e.MAs(15);return e.KtG(o.onSubmit(p))}),e.TgZ(2,"h2"),e._uU(3,"Edit your Information"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Username"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"div",2)(9,"label",5),e._uU(10,"Profile Image"),e.qZA(),e.TgZ(11,"input",6),e.NdJ("change",function(p){return o.onFileChange(p)}),e.qZA()(),e.YNc(12,U,1,1,"img",7),e.YNc(13,y,4,0,"div",8),e.TgZ(14,"button",null,9),e._uU(16,"Save Changes"),e.qZA()()}2&t&&(e.Q6J("ngIf",o.popup.isActive),e.xp6(1),e.Q6J("formGroup",o.editForm),e.xp6(11),e.Q6J("ngIf",o.currentProfilePicture),e.xp6(1),e.Q6J("ngIf",o.currentProfilePicture))},dependencies:[a.sg,a.O5,Z.R,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u],styles:["[_nghost-%COMP%]{margin:2rem}.edit-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;background-color:#f7f7f7;border:1px solid #ccc;border-radius:4px}.edit-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%], .form-group-side[_ngcontent-%COMP%]{margin-bottom:15px}.form-group-side[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:12px}input[_ngcontent-%COMP%]{width:95%;padding:10px;border:1px solid #ccc;border-radius:4px}.form-group-side[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:unset}.form-group-side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:unset}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin-top:20px;background-color:green;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#015605}img[_ngcontent-%COMP%]{margin:15px 0;width:50%;height:auto;object-fit:cover}"]}),n})(),canActivate:[g._],title:"Edit Profile"}];let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.Bz.forChild(A),c.Bz]}),n})();var E=i(6208);let J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[a.ez,F,E.m,s.UX]}),n})()}}]);